<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cook Tracker</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f4f7f6; padding: 20px; margin: 0; -webkit-tap-highlight-color: transparent; }
        
        .container { max-width: 450px; margin: 0 auto; background: white; border-radius: 20px; padding: 25px; box-shadow: 0 8px 20px rgba(0,0,0,0.05); }
        
        h2 { text-align: center; margin-top: 0; color: #333; }
        
        /* Date Picker Styling */
        input[type="date"], input[type="month"] {
            font-size: 18px; padding: 15px; width: 100%; box-sizing: border-box;
            border: 2px solid #e0e0e0; border-radius: 12px; text-align: center; background: #fff;
            outline: none; color: #333; margin-bottom: 20px;
        }

        /* --- THE BIG STATUS CARD --- */
        .status-card {
            padding: 30px 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 2px solid transparent;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }

        /* State: ABSENT (Default) */
        .status-absent {
            background-color: #f5f5f5;
            border-color: #ddd;
            color: #777;
        }
        .status-absent .icon { font-size: 40px; opacity: 0.3; filter: grayscale(100%); }
        .status-absent .label { font-size: 18px; font-weight: bold; margin-top: 10px; }
        .status-absent:active { transform: scale(0.98); }

        /* State: PRESENT (Active) */
        .status-present {
            background-color: #e8f5e9;
            border-color: #4caf50;
            color: #2e7d32;
            box-shadow: 0 8px 15px rgba(76, 175, 80, 0.2);
        }
        .status-present .icon { font-size: 40px; }
        .status-present .label { font-size: 20px; font-weight: bold; margin-top: 10px; }
        .status-present:active { transform: scale(0.98); }


        /* Bill Summary Section */
        .bill-section { margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px; }
        .bill-header { font-size: 14px; text-transform: uppercase; color: #999; letter-spacing: 1px; font-weight: bold; margin-bottom: 15px;}
        
        .bill-card {
            background: linear-gradient(135deg, #0061ff, #60efff);
            color: white; padding: 20px; border-radius: 15px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .bill-left { text-align: left; }
        .bill-right { text-align: right; }
        .big-money { font-size: 32px; font-weight: bold; }
        .small-text { font-size: 14px; opacity: 0.9; }

        /* List below */
        .history-list { list-style: none; padding: 0; margin-top: 20px; }
        .history-item { 
            padding: 12px 0; border-bottom: 1px solid #f0f0f0; 
            display: flex; justify-content: space-between; color: #555;
        }
        .del-btn { color: #ff5252; background: none; border: none; font-size: 16px; padding: 0 10px; cursor: pointer; }

    </style>
</head>
<body>

<div class="container">
    <h2>üë©‚Äçüç≥ Cook Tracker</h2>

    <input type="date" id="attendanceDate">

    <div id="statusCard" class="status-card status-absent" onclick="toggleAttendance()">
        <div class="icon" id="statusIcon">‚ö™</div>
        <div class="label" id="statusText">Tap to Mark Present</div>
    </div>

    <div class="bill-section">
        <div class="bill-header">Monthly Report</div>
        <input type="month" id="reportMonth">
        
        <div class="bill-card">
            <div class="bill-left">
                <div class="small-text">Total Bill</div>
                <div class="big-money">‚Çπ<span id="totalCost">0</span></div>
            </div>
            <div class="bill-right">
                <div class="big-money" id="daysCount">0</div>
                <div class="small-text">Days</div>
            </div>
        </div>

        <ul class="history-list" id="historyList"></ul>
    </div>
</div>

<script>
    const COST_PER_DAY = 100;
    const attendanceDateEl = document.getElementById('attendanceDate');
    const reportMonthEl = document.getElementById('reportMonth');
    const statusCard = document.getElementById('statusCard');
    const statusIcon = document.getElementById('statusIcon');
    const statusText = document.getElementById('statusText');

    // Load Data
    let data = JSON.parse(localStorage.getItem('cookData')) || {};

    // Set Dates
    const today = new Date();
    attendanceDateEl.valueAsDate = today;
    const yyyy = today.getFullYear();
    const mm = String(today.getMonth() + 1).padStart(2, '0');
    reportMonthEl.value = `${yyyy}-${mm}`;

    // Event Listeners
    attendanceDateEl.addEventListener('change', updateUI);
    reportMonthEl.addEventListener('change', renderReport);

    // 1. THE TOGGLE FUNCTION
    function toggleAttendance() {
        const date = attendanceDateEl.value;
        
        if (data[date] === 'present') {
            delete data[date]; // Remove it
        } else {
            data[date] = 'present'; // Add it
        }
        
        saveAndRefresh();
    }

    function deleteEntry(date) {
        if(confirm('Delete entry for ' + date + '?')) {
            delete data[date];
            saveAndRefresh();
        }
    }

    function saveAndRefresh() {
        localStorage.setItem('cookData', JSON.stringify(data));
        updateUI();
        renderReport();
    }

    // 2. Update the Big Card Look
    function updateUI() {
        const date = attendanceDateEl.value;
        
        if (data[date] === 'present') {
            // MAKE IT GREEN
            statusCard.className = 'status-card status-present';
            statusIcon.innerText = '‚úÖ';
            statusText.innerText = 'Cook Came Today';
        } else {
            // MAKE IT GREY
            statusCard.className = 'status-card status-absent';
            statusIcon.innerText = '‚ö™'; // Empty circle
            statusText.innerText = 'Tap to Mark Present';
        }
    }

    // 3. Render Bill
    function renderReport() {
        const selectedMonthYear = reportMonthEl.value;
        const list = document.getElementById('historyList');
        list.innerHTML = ''; 
        let count = 0;
        
        Object.keys(data).sort().reverse().forEach(date => {
            if (date.startsWith(selectedMonthYear)) {
                count++;
                const d = new Date(date);
                const niceDate = d.toLocaleDateString('en-GB', { day: 'numeric', month: 'short', weekday: 'short' });
                
                const li = document.createElement('li');
                li.className = 'history-item';
                li.innerHTML = `
                    <span>${niceDate}</span>
                    <button class="del-btn" onclick="deleteEntry('${date}')">üóëÔ∏è</button>
                `;
                list.appendChild(li);
            }
        });

        document.getElementById('daysCount').innerText = count;
        document.getElementById('totalCost').innerText = count * COST_PER_DAY;
    }

    // Run on load
    updateUI();
    renderReport();

</script>
</body>
</html>
